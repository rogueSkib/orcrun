<!DOCTYPE html>
<html>
	<head>
		<title>Rungeon!</title>
		<meta name="viewport" content="minimal-ui">
	</head>

	<body style="display:block;border:0;margin:0;padding:0;" onresize="onResize()">
		<div id="gameWrapper">
			<iframe id="game" src="game.html" style="display:block;border:0;margin:0;padding:0;"></iframe>
		</div>

		<script>
			function onResize(allowResize) {
				var width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
				var height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
				var game = document.getElementById('game');

				if (allowResize) {
					var BG_WIDTH = 1024;
					var BG_HEIGHT = 576;
					var BG_RATIO = BG_WIDTH / BG_HEIGHT;
					var ratio = width / height;
					var horzFit = ratio <= BG_RATIO;
					var scale = horzFit ? width / BG_WIDTH : height / BG_HEIGHT;
					var ua = navigator.userAgent;
					var isMobileSafari = /Mobile Safari/.test(ua);
					var mult = isMobileSafari
						? ratio > 1 ? 0.66 : 0.78
						: 1;

					game.width = mult * scale * BG_WIDTH;
					game.height = mult * scale * BG_HEIGHT;

					if (game.width > BG_WIDTH) {
						game.height *= BG_WIDTH / game.width;
						game.width = BG_WIDTH;
					}

					if (game.height > BG_HEIGHT) {
						game.width *= BG_HEIGHT / game.height;
						game.height = BG_HEIGHT;
					}
				}

				var gameWrapper = document.getElementById('gameWrapper');
				gameWrapper.style.width = "1px";
				gameWrapper.style.height = "1px";
				gameWrapper.style["margin-top"] = ((height - game.height) / 2) + "px";
				gameWrapper.style["margin-left"] = ((width - game.width) / 2) + "px";
			};

			onResize(true);
		</script>
	</body>
</html>